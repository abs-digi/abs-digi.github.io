---
import { type CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

type Props = { post: CollectionEntry<'projects'> };

const { post } = Astro.props;
const { title, description, publishDate, tags } = post.data;

// Maggie Appleton Style: Growth Icons based on tags or random
// You can map specific tags to icons if you have them (e.g., 'seedling', 'budding')
const icon = tags.includes('Seedling') ? 'ðŸŒ±' 
    : tags.includes('Evergreen') ? 'ðŸŒ²' 
    : 'ðŸŒ¿'; // Default to Budding
---

<a href={`/digital-garden/${post.id}/`} class="group flex flex-col h-full rounded-lg border border-[var(--border-main)] bg-[var(--bg-main)] p-5 transition-all hover:-translate-y-1 hover:shadow-md hover:border-purple-500">
    <div class="mb-3 flex items-center justify-between">
        <span class="text-2xl">{icon}</span>
        <span class="text-xs font-serif italic text-[var(--text-muted)]">
            <FormattedDate date={publishDate} />
        </span>
    </div>
    
    <h3 class="mb-2 font-serif text-xl font-medium leading-tight group-hover:text-purple-700 dark:group-hover:text-purple-300">
        {title}
    </h3>

    {description && (
        <p class="mb-4 flex-grow text-sm leading-relaxed opacity-80 line-clamp-3">
            {description}
        </p>
    )}

    {tags.length > 0 && (
        <div class="mt-auto flex flex-wrap gap-2">
            {tags.slice(0, 2).map(tag => (
                <span class="text-[10px] uppercase tracking-wider px-2 py-1 rounded-md bg-[var(--bg-muted)] text-[var(--text-muted)]">
                    {tag}
                </span>
            ))}
        </div>
    )}
</a>