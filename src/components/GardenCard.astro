---
import { type CollectionEntry } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

type Props = { post: CollectionEntry<'garden'>; class?: string };

const { post, class: className } = Astro.props;
const { title, description, created, updated, tags, status } = post.data;

// Maggie Appleton Style: Growth Icons based on status field (garden collection uses 'seeds', 'trees', 'fruit')
const icon = status === 'seeds' ? 'üå±' : status === 'trees' ? 'üå≥' : 'üçé'; // Default to fruit
---

<article class:list={['group relative h-full', className]}>
    <a href={`/garden/${post.id}/`} class="absolute inset-0 z-10"></a>
    <div
        class="flex h-full flex-col rounded-xl border-2 border-[var(--border-main)] bg-[var(--bg-main)] p-6 transition-all hover:-translate-y-1 hover:border-[var(--accent)] hover:shadow-lg"
    >
        <div class="mb-4 flex items-center justify-between">
            <span class="text-3xl">{icon}</span>
            <span class="font-serif text-xs text-[var(--accent-light)] italic">
                <FormattedDate date={created} />
            </span>
        </div>

        <h3 class="mb-3 font-serif text-2xl leading-tight font-medium text-[var(--text-main)] transition-colors group-hover:text-[var(--accent)]">
            {title}
        </h3>

        {description && <p class="mb-6 line-clamp-3 flex-grow text-sm leading-relaxed text-[var(--text-main)] opacity-90">{description}</p>}

        {
            tags.length > 0 && (
                <div class="mt-auto flex flex-wrap gap-2">
                    {tags.slice(0, 3).map((tag) => (
                        <span class="rounded-full border border-[var(--border-main)] bg-[var(--bg-muted)] px-3 py-1 text-xs font-medium text-[var(--accent)]">
                            {tag}
                        </span>
                    ))}
                </div>
            )
        }
        <div class="mt-6 border-t border-[var(--border-main)] pt-4 text-right">
            <span class="text-xs text-[var(--accent)] font-medium">Explore note ‚Üí</span>
        </div>
    </div>
</article>
